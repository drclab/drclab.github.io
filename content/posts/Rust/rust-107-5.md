+++
title = "Rust 107-5: Separating Modules into Different Files"
date = "2026-07-24"
tags = ["rust", "modules", "files", "organization", "structure", "programming"]
categories = ["posts"]
series = ["Rust 107"]
type = "post"
draft = false
math = false
description = "Organize large Rust projects by separating modules into different files, with diagrams and examples."
+++

Welcome to Rust 107-5! As modules grow, keep them in separate files for better organization. This post shows how to split modules into files, with diagrams and examples.

## Separating Modules into Different Files

Start with inline modules. Extract to files as they expand.

Original code in `src/lib.rs`:

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

pub use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}
```

**Step 1:** Extract `front_of_house` to `src/front_of_house.rs`.

Update `src/lib.rs`:

```rust
mod front_of_house;

pub use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}
```

Create `src/front_of_house.rs`:

```rust
pub mod hosting {
    pub fn add_to_waitlist() {}
}
```

**File structure:**

```
src/
├── lib.rs
└── front_of_house.rs
```

**Step 2:** Extract `hosting` to `src/front_of_house/hosting.rs`.

Update `src/front_of_house.rs`:

```rust
pub mod hosting;
```

Create `src/front_of_house/hosting.rs`:

```rust
pub fn add_to_waitlist() {}
```

**Updated structure:**

```
src/
├── lib.rs
├── front_of_house/
│   └── hosting.rs
└── front_of_house.rs
```

The module tree stays the same; only file locations change.

## Alternate File Paths

Rust supports older style: `src/front_of_house/mod.rs` instead of `src/front_of_house.rs`.

For `hosting`: `src/front_of_house/hosting/mod.rs`.

Don't mix styles for the same module—compiler errors.

**Diagram of alternate structure:**

```
src/
├── lib.rs
└── front_of_house/
    ├── mod.rs  (instead of front_of_house.rs)
    └── hosting/
        └── mod.rs  (instead of hosting.rs)
```

## Example: Full Restaurant Crate

`src/lib.rs`:

```rust
mod front_of_house;

pub use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}
```

`src/front_of_house.rs`:

```rust
pub mod hosting;
pub mod serving;
```

`src/front_of_house/hosting.rs`:

```rust
pub fn add_to_waitlist() {
    println!("Added!");
}

pub fn seat_at_table() {}
```

`src/front_of_house/serving.rs`:

```rust
pub fn take_order() {}
pub fn serve_order() {}
pub fn take_payment() {}
```

This organizes code cleanly.

## Summary

Separate modules into files matching the module tree. Use `mod` declarations, and Rust finds the files. Alternate paths exist but prefer the modern style.

Next, we'll explore common collections.

Stay tuned for more Rust!