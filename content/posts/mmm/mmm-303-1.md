+++
title = "MMM 303-1: Cluster Definition and Stratification"
date = 2026-02-23
type = "post"
draft = false
categories = ["posts", "stats"]
tags = ["marketing", "causal-inference", "mmm", "panel-data"]
description = "How cluster choice, stratification, and re-randomization shape geo-experiment validity and power."
math = true
+++

## Why clusters are the design unit
Geo-experiments randomize treatment at a cluster level: DMAs, metros, postal codes, or custom regions. Formally, units are partitioned into clusters $C_1,\ldots,C_G$, and treatment is assigned at the cluster level so $D_{it}=D_{gt}$ for all $i\in C_g$.

The estimand is therefore **cluster-level**:

$$
\mathbb{E}[Y_{gt}(1)-Y_{gt}(0)],
$$

where $Y_{gt}$ is a cluster outcome. If you define $Y_{gt}$ as total sales instead of an average, the estimand implicitly weights clusters by size, which can align with revenue-focused questions.

## Cluster size is a trade-off
- **Larger clusters** internalize spillovers because consumers and competitors interact within the cluster.
- **Smaller clusters** increase the number of clusters and statistical power.

The right choice depends on spillover strength, within- and between-cluster variance, and the total number of units. Boundary choices also change the estimand and interference structure (the MAUP problem), so they are causal design decisions, not just operational ones.

## Stratification for balance and precision
Stratification groups clusters by observable characteristics (market size, demographics, historical sales, competitive intensity), then randomizes within each stratum. This ensures balance on key covariates and reduces estimator variance.

Avoid over-stratification: if a stratum has too few clusters, within-stratum comparisons become weak. A practical rule is to ensure at least a few treated and control clusters per stratum.

## Re-randomization and correct inference
Re-randomization draws multiple candidate assignments, evaluates balance, and selects the best allocation using a pre-specified criterion. This improves balance but changes the randomization distribution used for inference.

Key requirement: inference must **condition on the acceptance rule**. Using the unrestricted randomization distribution after re-randomization understates uncertainty.

## Takeaway
Cluster definition and stratification are the heart of geo-experiment design. They determine the estimand, spillover exposure, power, and the validity of inference. Treat them as core causal design decisions, not implementation details.

## References
- Shaw, C. (2025). *Causal Inference in Marketing: Panel Data and Machine Learning Methods* (Community Review Edition), Section 3.3.1.
- Morgan, K. L., and Rubin, D. B. (2012). Rerandomization to improve covariate balance in experiments.
