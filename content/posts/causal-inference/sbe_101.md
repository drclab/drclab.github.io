+++
title = "SBE 101: Assignment Paths and Carryover Effects"
date = "2026-11-19"
type = "post"
draft = false
math = true
summary = "Section 2.1 of Bojinov, Simchi-Levi, and Zhao (2023) in plain English: how switchback designs encode treatment paths, define potential outcomes, and rely on nonanticipation plus m-carryover assumptions."
tags = ["causal-inference", "switchback-experiments"]
+++

Section 2.1 of *Design and Analysis of Switchback Experiments* formalizes how a single unit moves through a switchback test and which assumptions keep causal claims honest. Think of a ride-hailing platform toggling a fare rule each hour. The assignment path saves every toggle, and the potential outcomes trace what would have happened under every possible path.

{{< post-figure src="/images/posts/assignment-path-tree-vertical.svg" alt="Vertical binary tree diagram showing all possible assignment paths and potential outcomes for a 4-period switchback experiment" caption="Complete assignment path tree for T=4 periods. Each branch represents a treatment assignment (green edges for treatment, gray for control). The tree shows all 16 possible paths W₁:₄ and their corresponding potential outcomes Y at each stage." >}}

## Assignment paths as the experimental dial

- Each period $t \in \{1, \dots, T\}$ receives a binary assignment $W_t \in \{0, 1\}$ (0 = control, 1 = treatment).
- The full **assignment path** is a vector $W_{1:T} = (W_1, \dots, W_T)$; each realized path $w_{1:T}$ is one coin-flip history for the experiment.
- Outcomes are indexed by paths: $Y_t(w_{1:T})$ says "the outcome we would see at time $t$ if the prior and current assignments followed $w_{1:T}$."
- Because $Y_t$ depends on the entire path, switchbacks can recover direct treatment effects even when units interfere with themselves over time.

## Two structural assumptions keep the path manageable

- **Nonanticipation**: $Y_t$ ignores future assignments. Holding $w_{1:t}$ fixed, swapping any future $w_{t+1:T}$ leaves $Y_t$ unchanged. Design controls future flips, so this is realistic.
- **m-carryover**: Only the last $m$ assignments can influence $Y_t$. If the histories up to $t-m-1$ differ but the recent segment $w_{t-m:T}$ matches, then $Y_t$ is the same. Practically, $m$ captures how long a treatment's effect lingers (e.g., surge pricing may fade after 1-2 hours).
- With these in place, analysts can trim the notation to $Y_t(w_{t-m:t})$ for $t > m$, shrinking the state space without positing a parametric outcome model.

## Why it matters for design

- Precision depends on the total number of assignments $T$ and how often the path flips. Modeling carryover properly is key to picking the randomization frequency.
- Misstating $m$ mainly inflates variance rather than inducing bias, but Section 4.4 of the paper adds a testing procedure to choose $m$ before locking a design.
- The framework is fully design-based: potential outcomes are treated as fixed, and randomness comes solely from how we generate the assignment path.

## Quick checklist before running a switchback

1. Pick the time unit so it is shorter than the expected carryover window.
2. Use domain knowledge to set a plausible $m$; plan to test and refine it if uncertain.
3. Record and randomize over full paths $W_{1:T}$; inference will reference these paths directly.
4. Keep nonanticipation intact by committing to the assignment schedule ex ante.
