+++
title = "SBE 201: Optimal Design under Minimax Rule"
date = "2026-11-28"
type = "post"
draft = false
math = true
summary = "Section 3 of Bojinov, Simchi-Levi, and Zhao (2023): finding the optimal design (randomization points and probabilities) using the minimax rule."
tags = ["causal-inference", "switchback-experiments"]
+++

Section 3 of *Design and Analysis of Switchback Experiments* tackles the core engineering problem: how do we choose the best design $(\mathcal{T}, \mathcal{Q})$? The authors adopt a **minimax** approachâ€”finding the design that minimizes the maximum possible risk (variance) against an adversarial set of potential outcomes.

## The Minimax Framework

Since the true potential outcomes are unknown, we can't just optimize for one specific scenario. Instead, we guard against the worst case:

$$
\min_{\mathcal{T}, \mathcal{Q}} \max_{Y \in \mathcal{Y}} r(\eta_{\mathcal{T}, \mathcal{Q}}, Y)
$$

To make this solvable, the authors assume **Bounded Potential Outcomes** (Assumption 3): outcomes are bounded by some constant $B$. This reflects the inherent symmetry in potential outcomes and ensures the variance is well-behaved.

## Theorem 1: Fair Coins are Optimal

The first major result simplifies the search space dramatically. Under the minimax framework:

> **Theorem 1 (Optimality of Fair Coin Flipping)**: Any optimal design must satisfy $q_0 = q_1 = \dots = q_K = 1/2$.

We don't need to worry about biased coins. The optimal strategy is always to flip fair coins, reflecting the symmetry of the problem.

## Theorem 2: The Optimal Schedule

With probabilities fixed at $1/2$, the problem reduces to choosing the **randomization points** $\mathcal{T} = \{t_0, t_1, \dots, t_K\}$. There's a fundamental trade-off:

1.  **Too many switches**: You rarely see long consecutive sequences of treatment or control (e.g., $\mathbf{1}_{m+1}$), which are needed to estimate the lag-$p$ effect.
2.  **Too few switches**: You get very few independent blocks of data, reducing statistical power.

**Theorem 2** solves this subset selection problem. The optimal design splits the horizon into epochs based on the carryover order $m$.

- If $m=0$ (no carryover), randomize every period: $\mathcal{T}^* = \{1, 2, \dots, T\}$.
- If $m > 0$, the optimal design typically randomizes once every $m$ periods (roughly).

## Key Takeaway: Granularity Matters

The optimal randomization frequency depends directly on the **physical duration** of the carryover effect.

- If carryover lasts 2 hours, you should randomize roughly every 2 hours.
- This holds regardless of whether you measure data every 1 minute or every 1 hour.

This provides a concrete guide for practitioners: match your switching frequency to the persistence of the treatment effect.
