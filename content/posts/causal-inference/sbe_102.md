+++
title = "SBE 102: Lag-$p$ Causal Effect"
date = "2026-11-22"
type = "post"
draft = false
math = true
summary = "Section 2.2 of Bojinov, Simchi-Levi, and Zhao (2023): defining the average lag-p causal effect that switchback experiments are built to estimate, and clarifying what the data actually reveal."
tags = ["causal-inference", "switchback-experiments"]
+++

Section 2.2 of *Design and Analysis of Switchback Experiments* pins down the causal quantity that switchbacks target: the benefit of keeping a unit in treatment for a stretch of consecutive periods versus keeping it in control.

## The lag-p causal effect the paper optimizes for

- Let $p$ be the experimenter’s guess for how long treatment effects linger (the order of carryover). A vector of $p\!+\!1$ ones is denoted $\mathbf{1}_{p+1}$; a matching vector of zeros is $\mathbf{0}_{p+1}$.
- The **average lag-$p$ causal effect** compares persistent treatment to persistent control over any $p\!+\!1$-length window:
  $$\tau_p(Y) = \frac{1}{T-p} \sum_{t=p+1}^T \big[Y_t(\mathbf{1}_{p+1}) - Y_t(\mathbf{0}_{p+1})\big].$$
- This estimand maps to the practical question: “What happens if I deploy the new policy continuously, relative to never deploying it, once carryover of length $p$ is accounted for?”
- The same randomization works whether you report the normalized average above or the unnormalized total $(T-p)\tau_p(Y)$.

## Perfect knowledge versus misspecification

- If $p$ matches the true carryover order $m$, you are in the **perfect knowledge** case; the optimal design the authors derive assumes this setting.
- If $p \ne m$, you are in the **misspecified** case. The paper analyzes the consequences later (Section 4.3) but still uses the same notation so designers can plug in their best-guess $p$ now.

## What the data actually give you

- Running a switchback yields a single realized assignment path $w_{1:T}$ and observed outcomes $Y_t^{\text{obs}} = Y_t(w_{1:T})$—one glimpse per period.
- Linking these observations back to the full set of potential outcomes rests on two practical conditions: there is only one version of each treatment level, and units comply with the assigned path (no deviations). With those in place, inference can proceed from the observed path to the lag-$p$ effect above.

## Implication for SBE planning

- Pick $p$ to reflect your best understanding of carryover (e.g., how long a pricing change keeps riders active). The design problem then becomes finding assignment paths that are most informative about $\tau_p(Y)$, knowing you will only observe one path in practice.
